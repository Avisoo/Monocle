<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

  <head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta
      name="viewport"
      content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"
    />
    <meta http-equiv="Content-Type" content="text/htmlcharset=utf-8"/>
    <title>Carlyle Embedded Reader example</title>

    <script type="text/javascript" src="../../src/carlyle.js"></script>

    <style type="text/css">
      #bookBox, #bookBox2 {
        width: 250px;
        height: 300px;
        border: 1px solid #000;
        background-color: #999;
        overflow: hidden;
      }
      #bookBox2 {
        margin-left: 50px;
      }
    </style>

    <script type="text/javascript">
      (function () {
        var bookData = {
          components: [
            'book1part1',
            'book1part2',
            'book1part3'
          ],
          getContents: function () {
            return [
              {
                title: "Chapter 1",
                component: 0
              },
              {
                title: "Chapter 2",
                component: 2,
                fragment: "chapter-2"
              }
            ]
          },
          getComponent: function (cmptId) {
            return document.getElementById(cmptId).innerHTML;
          },
          getMetaData: function(key) {
            return {
              title: "Ulysses",
              creator: "James Joyce"
            }[key];
          }
        }

        // Initialize the reader element.
        window.addEventListener(
          'load',
          function () {
            window.reader = Carlyle.Reader('bookBox', bookData);
            document.getElementById('bookBox2').addEventListener(
              'click',
              function () {
                if (window.reader2) { return; }
                window.reader2 = Carlyle.Reader('bookBox2');
              }
            );
          },
          false
        );
      })();
    </script>

  </head>

  <body>
    <h1>Carlyle Embedded Reader example</h1>
    <p>
      This demonstrates a Carlyle reader inside a few different elements on
      the one page.
    </p>

    <div id="bookBox"></div>

    <div style="display: none">

      <div id="book1part1">
        <h2>&mdash; I &mdash;</h2>
        <p>
        Stately, plump Buck Mulligan came from the stairhead, bearing a bowl of
        lather on which a mirror and a razor lay crossed. A yellow dressinggown,
        ungirdled, was sustained gently behind him on the mild morning air. He
        held the bowl aloft and intoned:
        </p>
        <p>
        &mdash;<i>Introibo ad altare Dei</i>.
        </p>
        <p>

        Halted, he peered down the dark winding stairs and called out coarsely:
        </p>
        <p>
        &mdash;Come up, Kinch! Come up, you fearful jesuit!
        </p>
        <p>
        Solemnly he came forward and mounted the round gunrest. He faced about
        and blessed gravely thrice the tower, the surrounding land and the
        awaking mountains. Then, catching sight of Stephen Dedalus, he bent
        towards him and made rapid crosses in the air, gurgling in his throat
        and shaking his head. Stephen Dedalus, displeased and sleepy, leaned
        his arms on the top of the staircase and looked coldly at the shaking
        gurgling face that blessed him, equine in its length, and at the light
        untonsured hair, grained and hued like pale oak.
        </p>
        <p>
        Buck Mulligan peeped an instant under the mirror and then covered the
        bowl smartly.
        </p>
        <p>
        &mdash;Back to barracks! he said sternly.
        </p>
        <p>
        He added in a preacher's tone:
        </p>

        <p>
        &mdash;For this, O dearly beloved, is the genuine Christine: body and soul
        and blood and ouns. Slow music, please. Shut your eyes, gents. One
        moment. A little trouble about those white corpuscles. Silence, all.
        </p>
      </div>

      <div id="book1part2">
        <p>
        He peered sideways up and gave a long slow whistle of call, then paused
        awhile in rapt attention, his even white teeth glistening here and there
        with gold points. Chrysostomos. Two strong shrill whistles answered
        through the calm.
        </p>
        <p>
        &mdash;Thanks, old chap, he cried briskly. That will do nicely. Switch off
        the current, will you?
        </p>
        <p>
        He skipped off the gunrest and looked gravely at his watcher, gathering
        about his legs the loose folds of his gown. The plump shadowed face and
        sullen oval jowl recalled a prelate, patron of arts in the middle ages.
        A pleasant smile broke quietly over his lips.
        </p>
        <p>
        &mdash;The mockery of it! he said gaily. Your absurd name, an ancient Greek!
        </p>
        <p>
        He pointed his finger in friendly jest and went over to the parapet,
        laughing to himself. Stephen Dedalus stepped up, followed him wearily
        halfway and sat down on the edge of the gunrest, watching him still as
        he propped his mirror on the parapet, dipped the brush in the bowl and
        lathered cheeks and neck.

        </p>
      </div>

      <div id="book1part3">
        <p>
        Buck Mulligan's gay voice went on.
        </p>
        <p>
        &mdash;My name is absurd too: Malachi Mulligan, two dactyls. But it has a
        Hellenic ring, hasn't it? Tripping and sunny like the buck himself.
        We must go to Athens. Will you come if I can get the aunt to fork out
        twenty quid?
        </p>
        <p>
        He laid the brush aside and, laughing with delight, cried:
        </p>
        <p>
        &mdash;Will he come? The jejune jesuit!
        </p>
        <p>
        Ceasing, he began to shave with care.
        </p>
        <p>
        &mdash;Tell me, Mulligan, Stephen said quietly.
        </p>
        <p>
        &mdash;Yes, my love?
        </p>
        <p>
        &mdash;How long is Haines going to stay in this tower?
        </p>
        <p>
        Buck Mulligan showed a shaven cheek over his right shoulder.
        </p>
      </div>

    </div>



    <br />


    <p>
      This is a div that will be turned into a Carlyle reader when you
      first click on it.
    </p>


    <div id="bookBox2">
      <p>
      &mdash;God, isn't he dreadful? he said frankly. A ponderous Saxon. He thinks
      you're not a gentleman. God, these bloody English! Bursting with money
      and indigestion. Because he comes from Oxford. You know, Dedalus, you
      have the real Oxford manner. He can't make you out. O, my name for you
      is the best: Kinch, the knife-blade.
      </p>
      <p>
      He shaved warily over his chin.
      </p>

      <p>
      &mdash;He was raving all night about a black panther, Stephen said. Where is
      his guncase?
      </p>
      <p>
      &mdash;A woful lunatic! Mulligan said. Were you in a funk?
      </p>
      <p>
      &mdash;I was, Stephen said with energy and growing fear. Out here in the dark
      with a man I don't know raving and moaning to himself about shooting a
      black panther. You saved men from drowning. I'm not a hero, however. If
      he stays on here I am off.
      </p>
      <p>
      Buck Mulligan frowned at the lather on his razorblade. He hopped down
      from his perch and began to search his trouser pockets hastily.
      </p>
      <p>
      &mdash;Scutter! he cried thickly.
      </p>
      <p>
      He came over to the gunrest and, thrusting a hand into Stephen's upper
      pocket, said:

      </p>
      <p>
      &mdash;Lend us a loan of your noserag to wipe my razor.
      </p>
      <p>
      Stephen suffered him to pull out and hold up on show by its corner a
      dirty crumpled handkerchief. Buck Mulligan wiped the razorblade neatly.
      Then, gazing over the handkerchief, he said:
      </p>
      <p>
      &mdash;The bard's noserag! A new art colour for our Irish poets: snotgreen.
      You can almost taste it, can't you?
      </p>
      <p>
      He mounted to the parapet again and gazed out over Dublin bay, his fair
      oakpale hair stirring slightly.
      </p>
      <p>
      &mdash;God! he said quietly. Isn't the sea what Algy calls it: a great
      sweet mother? The snotgreen sea. The scrotumtightening sea. <i>Epi oinopa
      ponton</i>. Ah, Dedalus, the Greeks! I must teach you. You must read them
      in the original. <i>Thalatta! Thalatta</i>! She is our great sweet mother.
      Come and look.

      </p>
      <p>
      Stephen stood up and went over to the parapet. Leaning on it he looked
      down on the water and on the mailboat clearing the harbourmouth of
      Kingstown.
      </p>
      <p>
      &mdash;Our mighty mother! Buck Mulligan said.
      </p>
      <p>
      He turned abruptly his grey searching eyes from the sea to Stephen's
      face.
      </p>
      <p>
      &mdash;The aunt thinks you killed your mother, he said. That's why she won't
      let me have anything to do with you.
      </p>
      <p>
      &mdash;Someone killed her, Stephen said gloomily.
      </p>
      <p>

      &mdash;You could have knelt down, damn it, Kinch, when your dying mother
      asked you, Buck Mulligan said. I'm hyperborean as much as you. But to
      think of your mother begging you with her last breath to kneel down and
      pray for her. And you refused. There is something sinister in you...
      </p>
    </div>

  </body>
</html>
