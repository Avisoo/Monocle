Specification of the data object
--------------------------------

The book data object should provide certain required methods.

Methods:

* getComponents: returns an array of all the component ids that are to be
    accessed in linear reading order (ie, like the spine in an EPUB OPF file --
    you don't have to list every component, just the ones that are read in
    order).

* getContents: a function that returns an array of nested objects. Each object
    responds to `title` (a string), and `component` (a number). Any such object
    may also respond to `fragment` (a html anchor id), and `children`, which is
    an array of child objects responding to the same properties. For example,
    this is an example of a contents structure with one top-level section
    containing two sub-sections.

    [
      {
        title: "I: A curious incident",
        component: '1',
        children: [
          {
            title: "I. a. Part the first",
            component: '1',
            fragment: "part-the-first"
          },
          {
            title: "I. a. Part the second",
            component: '3',
            fragment: "part-the-second"
           }
         ]
       }
    ]

* getComponent(componentId): takes a component id (from the list returned
    by this.getComponents) and returns the body text of the corresponding
    component.
    Q: should it also return the stylesheet rules?

* getMetaData(key): takes a string "key" and returns the value of that
    metadata for this book. There is not yet any standardised list of
    possible keys -- we'll just see what happens for a bit. Note that if
    nothing will go wrong if you return null or an empty string for any
    requested key.


Note that if these methods retrieve any data from a server using AJAX
techniques, it should be a synchronous operation, because the clients of the
book data object expect the result to be return from the method itself
(not via a callback).


Example use
-----------

  var bookData = {
    getComponents: function () {
      return [
        'part1.xhtml',
        'part2.xhtml',
        'part3.xhtml',
        'part4.xhtml'
      ];
    },
    getContents: function () {
      return [
        {
          title: "Chapter 1",
          component: 'part1.xhtml'
        },
        {
          title: "Chapter 2",
          component: 'part3.xhtml',
          fragment: "chapter-2"
        }
      ]
    },
    getComponent: function (componentId) {
      return {
        'part1.xhtml': '<h1>Chapter 1</h1><p>Hello world</p>',
        'part2.xhtml': '<p>Chapter 1 continued.</p>',
        'part3.xhtml': '<p>Chapter 1 continued again.</p>' +
          '<h1 id="chapter-2">Chapter 2</h1>' +
          '<p>Hello from the second chapter.</p>',
        'part4.xhtml': '<p>THE END.</p>'
      ][componentId];
    },
    getMetaData: function(key) {
      return {
        title: "A book",
        creator: "Inventive Labs"
      }[key];
    }
  }

  // Initialize the reader element.
  var reader = Carlyle.Reader('bookBox');

  // Initialize a book object.
  var book = Carlyle.Book(bookData);

  // Assign the book to the reader and go to the 14th page.
  reader.setBook(book);
  reader.goToPage(14);


Public API
----------

Carlyle.Book(bookData) - constructor

  Instance methods:

  * preparePageFor(content_div, page_number, component_id)

Carlyle.Reader(node) - constructor. Node can be a string of the id of the
  element, or the element itself.

  Instance methods:

  * setBook(book)
  * getBook
  * goToPage(page_number, component_id)
  * goToFragment(fragment_id, component_id)
  * resized -- call when the node changes dimensions
  * spin -- show loading graphic / and spun -- hide loading graphic
