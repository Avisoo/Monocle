<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport"
      content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"
    >

    <!-- YOU SHOULD CHANGE THE TITLE... -->
    <title>A Basic Implementation of Monocle</title>

    <!-- UPDATE THESE PATHS TO POINT AT YOUR MONOCLE SCRIPTS -->
    <script type="text/javascript" src="../../src/monocle.js"></script>
    <script type="text/javascript" src="../../src/compat.js"></script>
    <script type="text/javascript" src="../../src/events.js"></script>
    <script type="text/javascript" src="../../src/factory.js"></script>
    <script type="text/javascript" src="../../src/styles.js"></script>
    <script type="text/javascript" src="../../src/reader.js"></script>
    <script type="text/javascript" src="../../src/book.js"></script>
    <script type="text/javascript" src="../../src/component.js"></script>
    <script type="text/javascript" src="../../src/place.js"></script>

    <script type="text/javascript" src="../../src/controls/panel.js"></script>
    <script type="text/javascript" src="../../src/panels/marginal.js"></script>
    <script type="text/javascript" src="../../src/flippers/slider.js"></script>
    <script type="text/javascript" src="../../src/flippers/legacy.js"></script>

    <script type="text/javascript" src="../../src/controls/contents.js"></script>

    <link rel="stylesheet" type="text/css" href="../../src/monocle.css" />

    <script type="text/javascript">
      (function () {
        var bookData = {
          getComponents: function () {
            // LIST THE PATHS TO EACH COMPONENT FILE IN YOUR BOOK - IN ORDER
            // YOU CAN HAVE ANY NUMBER OF COMPONENTS.
            return [
              'components/part1.html',
              'components/part2.html',
              'components/part3.html',
              'components/part4.html'
            ];
          },
          getContents: function () {
            return [
              // CREATE A TITLE/SRC OBJECT FOR EACH CHAPTER
              {
                title: "Chapter 1",
                src: "components/part1.html"
              },
              {
                title: "Chapter 2",
                src: "components/part3.html"
              }
            ]
          },
          getComponent: function (componentId) {
            return { url: componentId }
          },
          getMetaData: function(key) {
            return {
              // UPDATE THESE VALUES TO THE TITLE AND AUTHOR OF YOUR BOOK
              title: "A book",
              creator: "Monocle"
            }[key];
          }
        }

        Monocle.Events.listen(
          window,
          'load',
          function () {
            Monocle.Reader(
              'rdr',
              bookData,
              { panels: Monocle.Panels.Marginal },
              function (rdr) {
                var toc = Monocle.Controls.Contents(rdr);
                rdr.addControl(toc, 'popover', { hidden: true });
                var bt = {}
                bt.createControlElements = function () {
                  var runner = document.createElement('div');
                  runner.className = "bookTitle";
                  runner.innerHTML = rdr.getBook().getMetaData('title');
                  Monocle.Events.listenForContact(
                    runner,
                    { start: function () { rdr.showControl(toc); } }
                  );
                  return runner;
                }
                rdr.addControl(bt, 'page');
              }
            );
          }
        );
      })();
    </script>

    <style type="text/css">
      #rdr {
        width: 300px;
        height: 400px;
        position: absolute;
      }
      .bookTitle {
        font: 8pt Helvetica, Arial, sans-serif;
        text-transform: uppercase;
        color: #999;
        text-align: center;
        padding: 3px 0;
      }
    </style>

  </head>
  <body>
    <div id="rdr">
    </div>
  </body>
</html>
